<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Práctica Objetos</title>
</head>
<body>
    <h1>Biblioteca de Libros</h1>
    <div id="biblioteca"> <!-- La lista de libros se mostrará aquí --> 
        <div><p>"Titulo: La delicadeza Año:2002 Género: Narrativa</p></div>
        <div><p>"Titulo: Un mundo feliz Año:1984 Género: Ciencia Ficción</p></div>
    </div>
    <button onclick="agregarLibro()">Agregar Libro</button>
    <button onclick="eliminarLibro()">Eliminar Libro</button>
    <button onclick="eliminarUltimo()">Eliminar Último Libro introducido</button>
    <button onclick="mostrarBiblio()">Mostrar Biblioteca</button>
    <!-- Por si acaso le voy  a meter clase e id a cada libro en la línea 53--> 
    <script>
        var arrayLibros = [];
        var divLibros = document.getElementById("biblioteca");
        function Libro(titulo, anio, genero){
            this.titulo = titulo;
            this.anio = anio;
            this.genero = genero;
        }

        function agregarLibro(){
            var libro = new Libro();
            libro.titulo = prompt("Título?");
            libro.anio = parseInt(prompt("Año?"));
            libro.genero = prompt("Género?");
            console.log(arrayLibros);
            arrayLibros.push(libro);
            mostrarBiblio();
        }

        function eliminarLibro(){
            let tituloEliminar = prompt("Título?");
            arrayLibros.forEach(function (element){
                if(element.titulo == tituloEliminar){
                    arrayLibros.delete(element);//sería mejor el splice que no te deja index huecos
                    //por qué no funciona ? =()
                }
            })
            mostrarBiblio();
        }
        function eliminarUltimo(){
            arrayLibros.pop();
            mostrarBiblio();
        }
        function mostrarBiblio(){
            divLibros.innerHTML = "";
            arrayLibros.forEach(function(libro){
                divLibros.innerHTML += "<div class='libro' id='libro'> <p> Título:" + libro.titulo + " Año: " + libro.anio + "Género: " + libro.genero + " </p> </div>";
            })
        }
    </script> 
</body>
</html>